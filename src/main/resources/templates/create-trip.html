<form action="/trips" method="post">
    <label>Countries:<br/>
        <select id="countries" name="countries" multiple size="5">
            <option th:each="c : ${countries}" th:value="${c.id}" th:text="${c.name}"></option>
        </select>
    </label><br/><br/>

    <label>Cities:<br/>
        <select id="cities" name="cities" multiple size="6">
        </select>
    </label><br/><br/>

    <label>Trip type:
        <select name="type">
            <option value="RELAXATION">RELAXATION</option>
            <option value="ACTIVE">ACTIVE</option>
            <option value="ROMANTIC">ROMANTIC</option>
            <option value="CULTURAL">CULTURAL</option>
            <option value="BUSINESS">BUSINESS</option>
        </select>
    </label><br/>

    <label>Start date: <input type="date" name="startDate"/></label><br/>
    <label>End date: <input type="date" name="endDate"/></label><br/>

    <label>Budget ($): <input type="number" step="0.01" name="budget"/></label><br/>

    <label>
        Include spending on transport in provided budget:
        <input type="checkbox" name="includeTransport" value="true"/>
    </label><br/>

    <label>
        Children:
        <input type="checkbox" name="hasChildren" value="true"/>
    </label><br/>
    <label>Additional info:<br/>
        <textarea name="additionalInfo" rows="4" cols="50"
                  placeholder="E.g. Eiffel Tower, Vatican, vegetarian food..."></textarea>
    </label><br/>

    <button type="submit">Create Trip</button>
</form>
<script>
    document.getElementById("countries").addEventListener("change", function () {
        const countryId = this.value;
        const citiesSelect = document.getElementById("cities");

        fetch("/api/cities?countryId=" + countryId)
            .then(response => response.json())
            .then(cities => {
                citiesSelect.innerHTML = "";
                cities.forEach(city => {
                    const option = document.createElement("option");
                    option.value = city.name;
                    option.text = city.name;
                    citiesSelect.appendChild(option);
                });
            });
    });
</script>


